<!-- templates/blog_form.html -->
{% extends 'includes/main.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col">
            <div class="card card-custom gutter-b">
                <div class="card-header">
                    <h3 class="card-title">{% if object %}Edit{% else %}Add{% endif %} Blog</h3>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        {{ form|crispy }}
                        <button type="submit" class="btn btn-primary">Save</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const isPrivateField = document.getElementById('id_is_private');
        const passcodeField = document.querySelector('.passcode-field');

        function togglePasscodeField() {
            if (isPrivateField.checked) {
                passcodeField.classList.remove('d-none');
            } else {
                passcodeField.classList.add('d-none');
            }
        }

        isPrivateField.addEventListener('change', togglePasscodeField);

        // Initial check
        togglePasscodeField();
    });
</script>

{% endblock %}
